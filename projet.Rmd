---
title: "Projet etude app mobile"
author: "Marinho Nicolas et Bruyere Pierre"
date: "2/24/2021"
output: pdf_document
langages: french 
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(forcats)
library(stringr)
version
```

Ici nous allons procéder à la récupération du jeu de données trouvé sur Internet et nous allons le mettre dans la variable nommée file.
```{r}
file='app.csv'
app<- read_delim(file,delim=",") 
```
Nous avons décidé que pour étudier ce jeu de données nous allions utiliser la problématique suivante: "Y a t-il des facteurs qui font que la note d'une application est plus élevée? "


Nous avons, dans un premier temps décider de regarder si les développeurs qui ont beaucoup d'application à leur actif sur l'Appstore ont des bonnes notes.

Donc on commence par regarder ceux qui ont le plus d'applications à leur actif .

```{r}
app %>% group_by(Developer) %>% count(ID,name="nb") %>% summarize(countApp = sum(nb)) %>% arrange(-countApp) %>% head(n=15) ;
```

Ici on a le tableau des 10 premiers développeurs qui ont le plus d'applications à leur actif.

Ensuite on va faire un comparatif avec leur note
```{r}
app %>%  group_by(Developer,`Average User Rating`) %>% count(ID,name="nb") %>% summarize(countApp = sum(nb)) %>% arrange(-countApp) %>% head(n=10) %>% select(Developer,`Average User Rating`,countApp);
```
mais ici on peut voir que certaines applications de ces developpeurs ne sont pas notées voila pourquoi nous avons des NA ... 

alors maintenant nous allons regarder ceux qui ont le plus d'applications notées.
```{r}
nbApp<-app %>% filter(!is.na(`Average User Rating`)) %>% group_by(Developer) %>% count(ID,name="nb") %>% summarize(countApp = sum(nb)) %>% arrange(-countApp)  

moyGradeDev<-app %>% filter(!is.na(`Average User Rating`)) %>% group_by(Developer) %>% summarize(AvgGrade=mean(`Average User Rating`))

tableFinal<-left_join(nbApp,moyGradeDev) %>% arrange(-nbApp$countApp)

tableFinal %>% select_all()

tableFinal %>% ggplot(tableFinal,mapping=aes(countApp,AvgGrade,color=AvgGrade))+ geom_jitter()+geom_smooth(method="auto",color="red",se=TRUE)
```
On peut voir tout de suite que le nombre d'appplications aux actifs des développeurs n'a aucun rapport avec les notes des applications.


Maintenant, nous allons voir si une application ayant beaucoup de notes implique que cette application aura une bonne note.
```{r}
app %>% arrange(-`User Rating Count`) %>% select(`Average User Rating`, `User Rating Count`) %>% filter(!is.na(`Average User Rating`)) %>% ggplot(app,mapping = aes(y=`Average User Rating`,x=`User Rating Count`,color = `Average User Rating`))+ geom_jitter(size=1) + geom_smooth(method = "auto",color="red")
```
On peut effectivement voir que dans la plupart des cas, une application qui a beaucoup de notes sera aussi une application qui aura une bonne note, il y a bien evidement quelques exceptions mais dans l'ensemble, avoir beaucoup de note veut dire une bonne note.
On voit aussi que la courbe de confiance commence à 4 et monte très vite aux alentours de 4.3, et qui reste à ce niveau jusqu'à 3 000 000 de notes, l'intervalle de confiance par contre est très précis au début car il y a un grand nombre d'applications qui ont peu (de l'orde des dizaines de milliers) de notes alors qu'après, à partir de 500 000 notes par application l'intervalle de confiance est très peu précis puiqu'il y a très peu d'applications avec autant de notes.


Mais, est-ce-qu'une application qui a peu de notes veut dire qu'elle a une mauvaise note?
C'est ce que nous allons regarder maintenant.
```{r}
app %>% arrange(`User Rating Count`) %>% select(`Average User Rating`, `User Rating Count`) %>% head(n=7000) %>% ggplot(app,mapping = aes(y=`Average User Rating`,x=`User Rating Count`,color = `Average User Rating`))+ geom_jitter() + geom_smooth(method = "auto",color="red")
```
On voit ici le même graphique mais avec des données plus restreint, avec 4000 comme nombre de notes maximum et on voit donc la partie précise de la courbe de confiance et on voit qu'effectivement, il y a beaucoup d'applications qui permettent donc d'avoir un intervalle de confiance précis.
On peut conclure que non, avoir peu de notes ne veut pas dire avoir une mauvaise note, on peut en effet voir que les résultat sont très éparpillés et prouvent donc que la réponse à notre question est non.



Dans cette partie, nous allons voir si une application qui a un prix aura une bonne note.
```{r,fig.width=10}
app %>% arrange(-Price) %>% filter(!is.na(`Average User Rating`)) %>% select(`Average User Rating`, Price) %>% ggplot(app,mapping = aes(y=`Average User Rating`,x=Price,color = `Average User Rating`,scale(Price,)))+ geom_jitter() + geom_smooth(method="auto",color="red") +xlab("Price ($)")
```
On voit ici que la tendance est très linéaire, c'est une droite avec très peu de changement (presque parallèle à l'axe des abscysses) et qui a un intervalle de confiance très précis.
On peut partager les résultats en deux, les applications qui coûtent moins de 15 dollars et celles qui coûtent plus de 15 dollars.
On observe que les applications qui coûtent moins que 15 dollars vont d'une très mauvaise note, 1, jusqu'à 5.
On observe aussi que les applications qui coûtent plus que 15 dollars ont forcèment une bonne note, les plus auvaises étant supérieurs à 3.
On peut donc conclure que à partir d'environ 15 dollars, le prix d'une application a indique une bonne note pour l'application. 


Ici, nous allons regarder si la catégorie du jeu a une influence sur les notes, en moyenne.
```{r , fig.width=20,fig.height=4}
app %>% filter(!is.na(`Average User Rating`)) %>% group_by(`Primary Genre`) %>% summarise(AvgGrade=mean(`Average User Rating`)) %>% ggplot(app,mapping=aes(`Primary Genre`,AvgGrade,fill=`Primary Genre`))+geom_col()
```
//ici pensez a mettre notre marge d'erreur avec geom_errorbar(nico)
On peut effectivement observer que certaines catégories comme Food & Drink ou Newson une moyenne très haute, casiment à 5, alors que Medical et Lifestyle sont des catégories avec des moyennes beaucoup plus faibles, proche de 3. On peut en conclure que la catégorie de l'application a une vrai relation avec la note, les développeurs ont en moyenne des meilleures notes sur certaines catégories que sur d'autres.


Ici on va regarder si la possibilité d'achats dans l'application a une influence sur la note, avec des différences selon le nombre et le coût des achats.
```{r}
app %>% arrange(`In-app Purchases`) %>% filter(!is.na(`Average User Rating`)) %>% filter(!is.na(`In-app Purchases`)) %>% group_by(`In-app Purchases`) %>%  select(`In-app Purchases`, `Average User Rating`) %>% head(500) %>% ggplot(app,mapping = aes(x=`Average User Rating`,fill = `In-app Purchases`))+ geom_histogram(binwidth = 0.25) + ylab("nbApplication")
```
On peut voir que la possiblité d'acheter dans l'application n'influe pas vraiment sur la note car on voit que des applications avec les mêmes possibilités d'achats (0.99 par exemple), ont des notes allant de 2 à 5.
En conclusion on ne peut pas dire qu'avoir des achats dans l'application à une influence sur la note d'une application.

Maintenant, nous allons regarder si l'Age Rating, donc l'âge conseillé pour telle ou telle application, a une influence sur les notes.
```{r}
app %>% arrange(`Age Rating`) %>% filter(!is.na(`Average User Rating`)) %>% select(`Age Rating`, `Average User Rating`) %>% ggplot(app,mapping = aes(x=`Average User Rating`,fill = `Age Rating`))+ geom_histogram(binwidth = 0.25) + ylab("nbApplication")
```
On peut observer que non, l'âge conseillé n'a pas vraiment d'influence sur les notes, les proportions sont à peu près similaires peu importe la note.

